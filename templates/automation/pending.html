<div class="space-y-4">
  <div class="flex items-center justify-between">
    <h1 class="text-xl font-semibold">Pending Actions</h1>
    <a class="btn-outline px-3 py-2 text-sm" href="/automation">Zurück</a>
  </div>

  {% if read_only %}
  <div class="rounded-xl border border-rose-400/40 bg-rose-500/10 p-3 text-sm">Read-only mode aktiv. Bestätigungen sind deaktiviert.</div>
  {% endif %}

  <div class="card p-0 overflow-x-auto">
    <table class="min-w-full text-sm">
      <thead>
        <tr class="text-left border-b border-zinc-700/40">
          <th class="p-3">Created</th>
          <th class="p-3">Rule</th>
          <th class="p-3">Action</th>
          <th class="p-3">Context</th>
          <th class="p-3">Aktion</th>
        </tr>
      </thead>
      <tbody>
        {% for item in items %}
        <tr class="border-b border-zinc-700/20">
          <td class="p-3">{{ item.created_at }}</td>
          <td class="p-3"><code>{{ item.rule_id }}</code></td>
          <td class="p-3">{{ item.action_type }}</td>
          <td class="p-3"><code>{{ item.context_snapshot }}</code></td>
          <td class="p-3">
            <form method="post" action="/automation/pending/{{ item.id }}/confirm" class="inline">
              <input type="hidden" name="csrf_token" value="{{ csrf_token }}">
              <input type="hidden" name="safety_ack" value="1">
              <input type="hidden" name="confirm_token" value="{{ item.confirm_token }}">
              <button class="btn-primary px-2 py-1 text-xs" type="submit" {% if read_only %}disabled{% endif %}>Confirm</button>
            </form>
          </td>
        </tr>
        {% else %}
        <tr>
          <td class="p-3 opacity-70" colspan="5">Keine offenen Pending Actions.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
