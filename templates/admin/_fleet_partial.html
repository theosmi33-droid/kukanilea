<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
  <!-- Hub Card -->
  <div class="card p-6 rounded-2xl border-2 border-indigo-500/20 shadow-lg shadow-indigo-500/5 bg-indigo-50/5 relative overflow-hidden">
    <div class="absolute -top-4 -right-4 p-4 opacity-10 text-indigo-500">
      <svg class="w-24 h-24" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01"></path></svg>
    </div>
    <div class="relative z-10">
      <div class="flex justify-between items-start mb-6">
        <div>
          <div class="text-[10px] font-black text-indigo-600 uppercase tracking-[0.2em] mb-1">Zentrale</div>
          <h2 class="text-xl font-bold">Workshop Hub</h2>
        </div>
        <div class="px-2 py-1 bg-indigo-100 text-indigo-700 text-[9px] font-black uppercase tracking-widest rounded-md">Master</div>
      </div>
      
      <div class="space-y-4">
        <div class="flex justify-between items-center pb-2 border-b border-zinc-100">
          <span class="text-xs text-zinc-500 uppercase tracking-wider font-semibold">CPU Temp</span>
          <span class="text-sm font-bold {{ 'text-rose-600 bg-rose-50 px-2 py-0.5 rounded animate-pulse' if hub_vitals.cpu_temp != 'N/A' and hub_vitals.cpu_temp > 80 else 'text-emerald-600' }}">
            {{ hub_vitals.cpu_temp }}°C
          </span>
        </div>
        <div class="flex justify-between items-center pb-2 border-b border-zinc-100">
          <span class="text-xs text-zinc-500 uppercase tracking-wider font-semibold">RAM Last</span>
          <span class="text-sm font-bold text-zinc-700">{{ hub_vitals.memory_usage_gb }} GB</span>
        </div>
        <div class="flex justify-between items-center">
          <span class="text-xs text-zinc-500 uppercase tracking-wider font-semibold">Speicher</span>
          <span class="text-sm font-bold text-zinc-700">{{ hub_vitals.disk_usage_percent }}%</span>
        </div>
      </div>
      
      <div class="mt-6 pt-4 border-t border-indigo-500/10">
        <div class="text-[10px] font-black text-zinc-400 uppercase tracking-[0.2em] mb-2">Immutable Backup Vault</div>
        <div class="flex items-center gap-2 p-2 rounded-lg {{ 'bg-emerald-50 border border-emerald-100' if backup_status.verified else 'bg-rose-50 border border-rose-100' }}">
          {% if backup_status.verified %}
            <svg class="w-5 h-5 text-emerald-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
            <div class="leading-none">
              <span class="text-xs font-semibold text-emerald-700 block">Signatur Verifiziert</span>
              <span class="text-[10px] text-emerald-600">{{ backup_status.text }}</span>
            </div>
          {% else %}
            <svg class="w-5 h-5 text-rose-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg>
            <div class="leading-none">
              <span class="text-xs font-semibold text-rose-700 block">Backup Warnung</span>
              <span class="text-[10px] text-rose-600">{{ backup_status.text }}</span>
            </div>
          {% endif %}
        </div>
      </div>
    </div>
  </div>

  <!-- Peer Cards -->
  {% for peer in fleet %}
  <div class="card p-6 rounded-2xl border transition-all duration-300 {{ 'border-rose-500/30 bg-rose-50/20 shadow-md shadow-rose-500/5 opacity-80' if peer.status == 'offline' else 'border-zinc-200 hover:border-indigo-400 hover:shadow-lg hover:shadow-indigo-500/5' }}">
    <div class="flex justify-between items-start mb-6">
      <div>
        <div class="text-[10px] font-black text-zinc-400 uppercase tracking-[0.2em] mb-1">Mesh Peer</div>
        <h2 class="text-lg font-bold">{{ peer.peer_id }}</h2>
      </div>
      {% if peer.status == 'online' %}
        <div class="px-2 py-1 bg-emerald-100 text-emerald-700 text-[9px] font-black uppercase tracking-widest rounded-md flex items-center gap-1.5 shadow-sm">
          <div class="w-1.5 h-1.5 bg-emerald-500 rounded-full animate-pulse"></div>
          Online
        </div>
      {% else %}
        <div class="px-2 py-1 bg-rose-100 text-rose-700 text-[9px] font-black uppercase tracking-widest rounded-md shadow-sm">Offline</div>
      {% endif %}
    </div>

    <div class="space-y-4">
      <div class="flex justify-between items-center pb-2 border-b border-zinc-100">
        <span class="text-xs text-zinc-500 uppercase tracking-wider font-semibold">Letzter Sync</span>
        <span class="text-sm font-bold text-zinc-700">{{ peer.last_sync or 'Unbekannt' }}</span>
      </div>
      {% if peer.thermal %}
      <div class="flex justify-between items-center pb-2 border-b border-zinc-100">
        <span class="text-xs text-zinc-500 uppercase tracking-wider font-semibold">Temperatur</span>
        <span class="text-sm font-bold {{ 'text-rose-500' if peer.thermal > 80 else 'text-zinc-700' }}">{{ peer.thermal }}°C</span>
      </div>
      {% endif %}
      {% if peer.battery %}
      <div class="flex justify-between items-center">
        <span class="text-xs text-zinc-500 uppercase tracking-wider font-semibold">Batterie</span>
        <span class="text-sm font-bold text-zinc-700">
          {{ peer.battery }}%
          {% if peer.battery < 20 %}
            <span class="text-rose-500 ml-1">⚡</span>
          {% endif %}
        </span>
      </div>
      {% endif %}
    </div>
  </div>
  {% else %}
  <div class="col-span-1 md:col-span-1 lg:col-span-2 flex flex-col items-center justify-center p-8 border-2 border-dashed border-zinc-200 rounded-2xl bg-zinc-50 text-center text-zinc-400">
    <svg class="w-12 h-12 mb-3 text-zinc-300" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>
    <div class="text-sm font-bold text-zinc-500">Warte auf Heartbeats...</div>
    <div class="text-xs mt-1">Es sind aktuell keine weiteren Geräte im Mesh-Netzwerk aktiv.</div>
  </div>
  {% endfor %}
</div>