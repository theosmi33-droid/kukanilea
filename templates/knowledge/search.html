{% from 'components/alert.html' import banner %}
{% from 'components/button.html' import button_link, button_submit %}

<div class="space-y-12">
  <div class="flex justify-between items-end">
    <div>
      <div class="text-[10px] font-black text-zinc-400 uppercase tracking-[0.3em] mb-2">Intelligence</div>
      <h1 class="text-3xl font-bold tracking-tight text-black">Wissensdatenbank</h1>
    </div>
    <div class="flex gap-4">
      <a href="/knowledge/notes" class="text-[10px] font-black text-zinc-400 uppercase tracking-widest hover:text-black transition-colors">Notizen</a>
      <a href="/tags" class="text-[10px] font-black text-zinc-400 uppercase tracking-widest hover:text-black transition-colors">Tags</a>
      <a href="/knowledge/email/upload" class="text-[10px] font-black text-zinc-400 uppercase tracking-widest hover:text-black transition-colors">Email Ingest</a>
    </div>
  </div>

  <form class="relative group" hx-get="/knowledge/_results" hx-target="#kbResults" hx-swap="innerHTML">
    <div class="bg-zinc-50 border border-zinc-200 rounded-2xl p-2 flex items-center shadow-sm focus-within:ring-2 focus-within:ring-blue-500/20 transition-all">
      <input class="flex-1 bg-transparent border-none px-6 py-4 text-lg focus:outline-none placeholder:text-zinc-300" type="text" name="q" value="{{ q }}" placeholder="Knowledge durchsuchen..." maxlength="256" required>
      <button type="submit" class="bg-black hover:bg-zinc-800 text-white p-4 rounded-xl transition-all active:scale-95 shadow-lg">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
      </button>
    </div>
    
    <div class="mt-6 flex gap-6 items-center">
      <div class="flex items-center gap-3">
        <span class="text-[10px] font-black text-zinc-400 uppercase tracking-widest">FILTER:</span>
        <select class="bg-transparent border-none text-[10px] font-black uppercase tracking-widest text-zinc-600 focus:outline-none cursor-pointer" name="source_type">
          <option value="" {% if not source_type %}selected{% endif %}>Alle Quellen</option>
          <option value="manual" {% if source_type=='manual' %}selected{% endif %}>Manual</option>
          <option value="task" {% if source_type=='task' %}selected{% endif %}>Task</option>
          <option value="document" {% if source_type=='document' %}selected{% endif %}>Document</option>
          <option value="email" {% if source_type=='email' %}selected{% endif %}>Email</option>
        </select>
      </div>
      <div class="w-px h-3 bg-zinc-100"></div>
      <label class="flex items-center gap-2 text-[10px] font-black uppercase tracking-widest text-zinc-400 cursor-pointer hover:text-black">
        <input type="checkbox" name="owner_only" value="1" {% if owner_only %}checked{% endif %} class="rounded border-zinc-300 text-black focus:ring-0">
        Nur eigene Inhalte
      </label>
    </div>
  </form>

  <div id="kbResults" class="pt-10 border-t border-zinc-50">
    {% include 'knowledge/partials/_results.html' %}
  </div>
</div>
