<div id="entityLinksPanel" class="space-y-3">
  {% include 'entity_links/partials/_links_form.html' %}

  <div class="overflow-hidden border rounded-xl" style="border-color:var(--border)">
    <table class="w-full text-sm">
      <thead>
        <tr class="border-b" style="border-color:var(--border)">
          <th class="text-left px-3 py-2">Typ</th>
          <th class="text-left px-3 py-2">ID</th>
          <th class="text-left px-3 py-2">Link-Typ</th>
          <th class="text-left px-3 py-2">Zeit</th>
          <th class="text-left px-3 py-2">Aktion</th>
        </tr>
      </thead>
      <tbody>
        {% for row in links %}
        <tr class="border-b" style="border-color:var(--border)">
          <td class="px-3 py-2">{{ row.other_type }}</td>
          <td class="px-3 py-2">{{ row.other_id[:8] if row.other_id else '-' }}</td>
          <td class="px-3 py-2">{{ row.link_type }}</td>
          <td class="px-3 py-2">{{ row.created_at }}</td>
          <td class="px-3 py-2">
            <form method="post" action="/entity-links/{{ row.id }}/delete" hx-post="/entity-links/{{ row.id }}/delete" hx-target="#entityLinksPanel" hx-swap="outerHTML">
              <input type="hidden" name="context_entity_type" value="{{ entity_type }}">
              <input type="hidden" name="context_entity_id" value="{{ entity_id }}">
              <button class="btn-outline px-2 py-1 text-xs" type="submit" {% if read_only %}disabled{% endif %}>Entfernen</button>
            </form>
          </td>
        </tr>
        {% else %}
        <tr><td class="px-3 py-3 muted" colspan="5">Keine Verkn√ºpfungen vorhanden.</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
